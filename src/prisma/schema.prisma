generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  user_id       BigInt   @id @default(autoincrement())
  email         String   @unique
  password_hash String
  public_key    String
  private_key   String
  is_online     Boolean  @default(false)
  last_login    DateTime?
  created_at    DateTime @default(now())

  user_token    UserToken[]
  profile       Profile?
}

model UserToken {
  token_id      BigInt   @id @default(autoincrement())
  user_id       BigInt
  access_token  String
  refresh_token String
  created_at    DateTime @default(now())

  user          User     @relation(fields: [user_id], references: [user_id])
}

model Profile {
  profile_id    BigInt   @id @default(autoincrement())
  user_id       BigInt   @unique
  first_name    String
  last_name     String
  patronymic    String?
  birth_date    DateTime?
  avatar_url    String?
  bio           String?
  created_at    DateTime @default(now())
  updated_at    DateTime @updatedAt

  user          User     @relation(fields: [user_id], references: [user_id])
}
